<!DOCTYPE html><html lang="en" data-mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="One workaround to accessing Docker containers connected to VPNs (Windscribe)" /><meta property="og:locale" content="en" /><meta name="description" content="Putting a docker container behind a VPN can be useful in many ways. For instance you can have a web service torrent client like transmission running in a docker container and not have your ISP throttle your speed after detecting where the high traffic is coming from… Or perhaps download files from sites that aren’t available in your area. " /><meta property="og:description" content="Putting a docker container behind a VPN can be useful in many ways. For instance you can have a web service torrent client like transmission running in a docker container and not have your ISP throttle your speed after detecting where the high traffic is coming from… Or perhaps download files from sites that aren’t available in your area. " /><link rel="canonical" href="/posts/One-workaround-to-accessing-Docker-containers-connected-to-VPNs-(Windscribe)/" /><meta property="og:url" content="/posts/One-workaround-to-accessing-Docker-containers-connected-to-VPNs-(Windscribe)/" /><meta property="og:site_name" content="Computers And Stuff" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-05-28T21:58:36+00:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="One workaround to accessing Docker containers connected to VPNs (Windscribe)" /><meta name="twitter:site" content="@computerstuffyt" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2021-05-28T21:58:36+00:00","datePublished":"2021-05-28T21:58:36+00:00","description":"Putting a docker container behind a VPN can be useful in many ways. For instance you can have a web service torrent client like transmission running in a docker container and not have your ISP throttle your speed after detecting where the high traffic is coming from… Or perhaps download files from sites that aren’t available in your area. ","headline":"One workaround to accessing Docker containers connected to VPNs (Windscribe)","mainEntityOfPage":{"@type":"WebPage","@id":"/posts/One-workaround-to-accessing-Docker-containers-connected-to-VPNs-(Windscribe)/"},"url":"/posts/One-workaround-to-accessing-Docker-containers-connected-to-VPNs-(Windscribe)/"}</script><title>One workaround to accessing Docker containers connected to VPNs (Windscribe) | Computers And Stuff</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Computers And Stuff"><meta name="application-name" content="Computers And Stuff"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src=" /images/android-chrome-72x72.png " alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Computers And Stuff</a></div><div class="site-subtitle font-italic">The website and blog for the YouTube channel Computers And Stuff. Video notes, updates, and cool projects are posted here</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://www.youtube.com/channel/UCuVtthC7KBBohRPLFFy6iNA" aria-label="youtube" target="_blank" rel="noopener"> <i class="fab fa-youtube"></i> </a> <a href="https://github.com/computersandstuff" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/computerstuffyt" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['contactcomputersandstuff','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>One workaround to accessing Docker containers connected to VPNs (Windscribe)</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>One workaround to accessing Docker containers connected to VPNs (Windscribe)</h1><div class="post-meta text-muted"><div> By <em> <a href="https://www.youtube.com/channel/UCuVtthC7KBBohRPLFFy6iNA">Luke</a> </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" data-ts="1622239116" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2021-05-28 </em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="720 words"> <em>4 min</em> read</span></div></div></div><div class="post-content"><p>Putting a docker container behind a VPN can be useful in many ways. For instance you can have a web service torrent client like transmission running in a docker container and not have your ISP throttle your speed after detecting where the high traffic is coming from… Or perhaps download files from sites that aren’t available in your area. </p><p>When I setup <a href="https://github.com/Kabe0/deluge-windscribe">a simple docker container</a> with <a href="https://windscribe.com/">Windscribe</a> (a VPN with 10gb free and torrent access) and deluge, I ran into the problem of the web GUI of deluge not being accessible from the mapped docker port when the VPN was enabled.</p><h3 id="why-this-happens"><span class="mr-2">Why this happens</span><a href="#why-this-happens" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>My VPN Windscribe has a LAN-bypass feature. Usually you cannot access devices in your local network or be accessed by your network when connected to the VPN. LAN-bypass allows everyone in your subnet to access the server. Docker uses its own virtual network for all of its containers. Therefore the containers treat your local network (outside of the docker containers, IE your server, router, and computer) like WAN. </p><p>Take my local network for example: it uses the 10.0.0.0/24 subnet while my docker containers use 172.17.0.0/16 subnet. So Windscribe starts and looks at the ethernet controller as if you were type in ifconfig. Let’s say it sees 172.17.0.15. Windscribe now thinks that your local network is 172.17.0.0/16. The bypass only allows these IPs. Other containers can access this one as they are in the virtual docker network, but let’s say my laptop (10.0.0.89) tries to access the forwarded port, it will time out. </p><p>Basically Windscribe (or any other VPN) thinks that the docker VLAN is LAN and your actual LAN is WAN and therefore blocks traffic.</p><p>A good explanation is in <a href="https://serverfault.com/a/957949">this serverfault answer.</a></p><h3 id="some-possible-solutions"><span class="mr-2">Some possible solutions:</span><a href="#some-possible-solutions" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>The first solution you can try is enabling LAN access or even disabling the firewall. In windscribe CLI you can do this by typing in the docker container’s CLI: </p><p>windscribe lan-bypass on </p><p>windscribe firewall off</p><p>This did not work for me though. </p><p>Issues may also occur with your VPN operating in the same subnet as your docker container, more information on this issue is in <a href="https://github.com/docker/for-mac/issues/2820">this docker issue.</a> (the issue is for docker-mac, but could be applicable to other platforms)</p><p>Connecting the docker container’s network to the host network is a possible solution, but can come with problems and will most definitely enable the VPN for your whole machine, which with a limited 10gb wouldn’t be ideal for everyone.</p><h3 id="what-actually-worked"><span class="mr-2"> What actually worked</span><a href="#what-actually-worked" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>This is a hack job solution, but here we go. Basically your network adapter on your host OS running docker will include a network adapter for the docker virtual network. The command ifconfig can bring up a list of network adapters. Usually the host OS’s IP address is the subnet plus 1. So for 172.16.0.0/16 it would be 172.16.0.1. We can actually ping all the docker containers from the host OS! So going back to the example of the docker container having the address 172.17.0.15, if we ping that we should get a response. </p><p>The solution here would be to get some sort of a web proxy if you don’t already have one installed. I have apache web server installed, but nginx would work fine too (<a href="https://www.reddit.com/r/sysadmin/comments/78scv6/nginx_or_apache/">probably better</a>). Add the proxy parameter to a virtualhost. This can be an issue especially if you are only working over LAN so you will need local DNS. In my case I finally ended up using jackett and transmission on the docker containers. I set my router running Fresh Tomato to define 10.0.0.30 (my server ip) to jackett.local and transmission.local. In apache config I put those two local addresses as my domain and pointed the proxy to 172.17.0.15:9117 and 172.17.0.15:9091. </p><h3 id="why-this-might-not-be-the-best-solution"><span class="mr-2">Why this might not be the best solution</span><a href="#why-this-might-not-be-the-best-solution" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>Docker IP addresses are very dynamic. For me they sometimes change every time I reboot, add, or delete a container. So you will have to either keep changing your proxy config or set a static IP. I set a static IP.</p><p>If it works it works.</p><p>I will edit this later. I didn’t do too much research for this project yet, and will have to post issues in github, experiment, and read into this to solve the issue. I will hope to add detailed instructions soon, but for now, this is what I have.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/howto/'>howto</a>, <a href='/categories/docker/'>docker</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/docker/" class="post-tag no-text-decoration" >docker</a> <a href="/tags/vpn/" class="post-tag no-text-decoration" >vpn</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=One workaround to accessing Docker containers connected to VPNs (Windscribe) - Computers And Stuff&amp;url=/posts/One-workaround-to-accessing-Docker-containers-connected-to-VPNs-(Windscribe)/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=One workaround to accessing Docker containers connected to VPNs (Windscribe) - Computers And Stuff&amp;u=/posts/One-workaround-to-accessing-Docker-containers-connected-to-VPNs-(Windscribe)/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=/posts/One-workaround-to-accessing-Docker-containers-connected-to-VPNs-(Windscribe)/&amp;text=One workaround to accessing Docker containers connected to VPNs (Windscribe) - Computers And Stuff" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/NEC-P120-teardown/">NEC P120 Teardown - What makes up a 90s cell phone?</a><li><a href="/posts/hotel-tech-hacks/">The Brain of A Hotel - Hac... or Inspecting the Tech Inside Hotels</a><li><a href="/posts/UART-(no-root-yet)-on-Nest-Camera-A0005-model/">UART (no root yet) on Nest Camera A0005 model</a><li><a href="/posts/best-ssds/">Best 2.5″ SSDs in 2020</a><li><a href="/posts/Samson-Go-Mic-Review/">Samson Go Mic Review</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/smart-device-hacking/">smart-device-hacking</a> <a class="post-tag" href="/tags/audio/">audio</a> <a class="post-tag" href="/tags/channel-updates/">channel-updates</a> <a class="post-tag" href="/tags/dark-mode/">dark-mode</a> <a class="post-tag" href="/tags/device-specs/">device-specs</a> <a class="post-tag" href="/tags/docker/">docker</a> <a class="post-tag" href="/tags/embedded/">embedded</a> <a class="post-tag" href="/tags/microphone/">microphone</a> <a class="post-tag" href="/tags/nest/">nest</a> <a class="post-tag" href="/tags/networking/">networking</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/Best-Way-to-Automatically-Switch-to-Dark-Mode-in-Windows-10/"><div class="card-body"> <em class="timeago small" data-ts="1622227619" > 2021-05-28 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Best Way to Automatically Switch to Dark Mode in Windows 10</h3><div class="text-muted small"><p>  If you’re like me you don’t like bright whites on applications burning your eyes while using your PC in the later hours and you also like to have a bright screen during the day when the sun is shi...</p></div></div></a></div><div class="card"> <a href="/posts/How-to-fix-D-LINK-DIR615-(E1)-Firmware-(solid-orange-light)/"><div class="card-body"> <em class="timeago small" data-ts="1589400015" > 2020-05-13 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>How to fix D-LINK DIR615 (E1) Firmware (solid orange light)</h3><div class="text-muted small"><p> The D-Link DIR615 Firmware problem is common when the firmware is corrupted or the router was powered off during a firmware update. Steps to fix: Download the correct firmware for your route...</p></div></div></a></div><div class="card"> <a href="/posts/Channel-Updates/"><div class="card-body"> <em class="timeago small" data-ts="1696802400" > 2023-10-08 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Channel Updates, A Receipt Printer, and The Future of Computers And Stuff</h3><div class="text-muted small"><p> Hello! It has been a while. Two years since my last upload of an Apple Airport AP. To anyone who has been following, I’ve been pretty busy and I’m trying to find time for the channel. However, r...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/Best-Way-to-Automatically-Switch-to-Dark-Mode-in-Windows-10/" class="btn btn-outline-primary" prompt="Older"><p>Best Way to Automatically Switch to Dark Mode in Windows 10</p></a> <a href="/posts/UART-(no-root-yet)-on-Nest-Camera-A0005-model/" class="btn btn-outline-primary" prompt="Newer"><p>UART (no root yet) on Nest Camera A0005 model</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://www.youtube.com/channel/UCuVtthC7KBBohRPLFFy6iNA">Luke</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/smart-device-hacking/">smart-device-hacking</a> <a class="post-tag" href="/tags/audio/">audio</a> <a class="post-tag" href="/tags/channel-updates/">channel-updates</a> <a class="post-tag" href="/tags/dark-mode/">dark-mode</a> <a class="post-tag" href="/tags/device-specs/">device-specs</a> <a class="post-tag" href="/tags/docker/">docker</a> <a class="post-tag" href="/tags/embedded/">embedded</a> <a class="post-tag" href="/tags/microphone/">microphone</a> <a class="post-tag" href="/tags/nest/">nest</a> <a class="post-tag" href="/tags/networking/">networking</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
